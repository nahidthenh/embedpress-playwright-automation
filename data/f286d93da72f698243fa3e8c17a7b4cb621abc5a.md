# Test info

- Name: Gutenberg Spotify >> Spotify Single
- Location: /home/runner/work/embedpress-playwright-automation/embedpress-playwright-automation/tests/gutenberg/spotify.spec.js:12:5

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: locator('iframe[title="Spotify Embed: Surah Ar-Rahman (Be Heaven)"]').contentFrame().locator('.BackgroundColorContainer_backgroundColorContainer__YZSQ7')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for locator('iframe[title="Spotify Embed: Surah Ar-Rahman (Be Heaven)"]').contentFrame().locator('.BackgroundColorContainer_backgroundColorContainer__YZSQ7')

    at /home/runner/work/embedpress-playwright-automation/embedpress-playwright-automation/tests/gutenberg/spotify.spec.js:18:105
```

# Page snapshot

```yaml
- link "Skip to content":
  - /url: "#main"
- banner:
  - navigation "Primary Navigation":
    - list:
      - listitem:
        - link "Home":
          - /url: https://embedpress.wpqa.site/
      - listitem:
        - link "Random Gutenberg":
          - /url: https://embedpress.wpqa.site/random-gutenberg/
      - listitem:
        - link "Random Elementor":
          - /url: https://embedpress.wpqa.site/random-elementor/
      - listitem:
        - link "Random Classic":
          - /url: https://embedpress.wpqa.site/random-classic/
      - listitem:
        - link "Automation Report":
          - /url: https://nahidthenh.github.io/embedpress-playwright-automation/
      - listitem:
        - link "Md. Nahid Hasan (Admin)":
          - /url: https://embedpress.wpqa.site/wp-admin
  - paragraph
  - search "Search form":
    - searchbox "Search input"
    - textbox "Search autocomplete" [disabled]
  - button "Search magnifier":
    - img
  - paragraph
- heading "Gutenberg Spotify" [level=1]
- main:
  - article:
    - heading "Spotify Single" [level=2]
    - heading "Spotify Artist" [level=2]
    - heading "Spotify Album" [level=2]
    - heading "Spotify Playlist" [level=2]
- contentinfo:
  - paragraph: © 2025 EmbedPress Automation Testing WPDeveloper SQA Team
```

# Test source

```ts
   1 | const { test, expect } = require('@playwright/test');
   2 |
   3 | let slug = 'playwright-gutenberg/gutenberg-spotify';
   4 |
   5 |
   6 | test.describe("Gutenberg Spotify", () => {
   7 |     test.beforeEach(async ({ page }) => {
   8 |         await page.goto(slug);
   9 |         await page.waitForLoadState('networkidle');
  10 |     });
  11 |
  12 |     test('Spotify Single', async ({ page }) => {
  13 |         const heading = page.getByRole('heading', { name: 'Spotify Single' });
  14 |         await heading.scrollIntoViewIfNeeded();
  15 |         await expect(heading).toBeVisible();
  16 |         const framelocator = page.frameLocator('iframe[title="Spotify Embed: Surah Ar-Rahman (Be Heaven)"]');
  17 |
> 18 |         await expect(framelocator.locator('.BackgroundColorContainer_backgroundColorContainer__YZSQ7')).toBeVisible();
     |                                                                                                         ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  19 |         await expect(framelocator.locator('.CoverArtBase_coverArt__ne0XI')).toBeVisible();
  20 |         await expect(framelocator.getByRole('link', { name: 'Surah Ar-Rahman (Be Heaven)' })).toBeVisible();
  21 |         await expect(framelocator.getByLabel('More')).toBeVisible();
  22 |         await expect(framelocator.getByTestId('play-pause-button')).toBeVisible();
  23 |         await framelocator.getByTestId('play-pause-button').click();
  24 |     });
  25 |
  26 |
  27 |     test('Spotify Artist', async ({ page }) => {
  28 |         const heading = page.getByRole('heading', { name: 'Spotify Artist' });
  29 |         await heading.scrollIntoViewIfNeeded();
  30 |         await expect(heading).toBeVisible();
  31 |         const framelocator = page.frameLocator('iframe[title="Spotify Embed\\: Omar Hisham"]')
  32 |
  33 |         await expect(framelocator.getByRole('link', { name: 'Omar Hisham' })).toBeVisible();
  34 |         await expect(framelocator.locator('span').filter({ hasText: 'Top tracks' }).first()).toBeVisible();
  35 |         await expect(framelocator.locator('.PlayerControlsShort_playerControlsWrapper__qdkr5')).toBeVisible();
  36 |         await expect(framelocator.getByTestId('play-pause-button')).toBeVisible();
  37 |         await expect(framelocator.getByLabel('More')).toBeVisible();
  38 |         await expect(framelocator.getByTestId('tracklist-row-0')).toBeVisible();
  39 |         await expect(framelocator.getByTestId('tracklist-row-1')).toBeVisible();
  40 |         await expect(framelocator.getByTestId('tracklist-row-2')).toBeVisible();
  41 |     });
  42 |
  43 |     test('Spotify Album', async ({ page }) => {
  44 |         const heading = page.getByRole('heading', { name: 'Spotify Album' });
  45 |         await heading.scrollIntoViewIfNeeded();
  46 |         await expect(heading).toBeVisible();
  47 |         const framelocator = page.frameLocator('iframe[title="Spotify Embed: Al Sabaê Al Mounjiate (Quran)"]');
  48 |         await expect(framelocator
  49 |             .getByTestId('tracklist').locator('div').filter({ hasText: 'Al FatihaAbd Al Rahman Al' }).nth(1)).toBeVisible();
  50 |         await expect(framelocator.getByTestId('tracklist-row-0')).toBeVisible();
  51 |         await expect(framelocator.getByTestId('tracklist-row-1')).toBeVisible();
  52 |         await expect(framelocator.getByTestId('tracklist-row-2')).toBeVisible();
  53 |         await expect(framelocator.getByTestId('play-pause-button')).toBeVisible();
  54 |         await expect(framelocator.locator('.PlayerControlsShort_playerControlsWrapper__qdkr5')).toBeVisible();
  55 |         await expect(framelocator.getByLabel('More')).toBeVisible();
  56 |         await expect(framelocator.getByTestId('spotify-logo')).toBeVisible();
  57 |         await expect(framelocator.locator('.CoverArtBase_coverArt__ne0XI')).toBeVisible();
  58 |     });
  59 |
  60 |     test('Spotify Playlist', async ({ page }) => {
  61 |         const heading = page.getByRole('heading', { name: 'Spotify Playlist' });
  62 |         await heading.scrollIntoViewIfNeeded();
  63 |         await expect(heading).toBeVisible();
  64 |         const framelocator = page.frameLocator('iframe[title="Spotify Embed\\: Kids Quran playlist"]');
  65 |
  66 |         // await expect(framelocator.getByTestId('initialized-true')).toBeVisible();
  67 |         await expect(framelocator.getByTestId('tracklist').locator('div').filter({ hasText: '1AlbaqarahMashary Rashid Al-' }).nth(1)).toBeVisible();
  68 |         await expect(framelocator.getByTestId('tracklist-row-0')).toBeVisible();
  69 |         await expect(framelocator.getByTestId('tracklist-row-1')).toBeVisible();
  70 |         await expect(framelocator.getByTestId('tracklist-row-2')).toBeVisible();
  71 |         await expect(framelocator.getByTestId('play-pause-button')).toBeVisible();
  72 |         await expect(framelocator.getByLabel('More')).toBeVisible();
  73 |         await expect(framelocator.locator('.PlayerControlsShort_playerControlsWrapper__qdkr5')).toBeVisible();
  74 |         // await expect(framelocator.getByTestId('save-on-spotify-button')).toBeVisible();
  75 |         await expect(framelocator.getByTestId('spotify-logo')).toBeVisible();
  76 |         await expect(framelocator.getByRole('link', { name: 'Kids Quran playlist' })).toBeVisible();
  77 |         await expect(framelocator.locator('.CoverArtBase_coverArt__ne0XI')).toBeVisible();
  78 |         await expect(framelocator.getByTestId('play-pause-button')).toBeVisible();
  79 |         await framelocator.getByTestId('play-pause-button').click();
  80 |
  81 |         // await page.waitForTimeout(500);
  82 |
  83 |         // await framelocator.getByTestId('play-pause-button').click();
  84 |     });
  85 |
  86 | });
```