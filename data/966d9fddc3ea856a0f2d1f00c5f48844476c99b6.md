# Test info

- Name: Spreaker Gutenberg >> Spreaker Single Episode
- Location: /home/runner/work/embedpress-playwright-automation/embedpress-playwright-automation/tests/gutenberg/spreaker.spec.js:185:5

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: locator('iframe[title="This is title"]').nth(4)
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for locator('iframe[title="This is title"]').nth(4)

    at /home/runner/work/embedpress-playwright-automation/embedpress-playwright-automation/tests/gutenberg/spreaker.spec.js:191:37
```

# Page snapshot

```yaml
- link "Skip to content":
  - /url: "#main"
- banner:
  - navigation "Primary Navigation":
    - list:
      - listitem:
        - link "Home":
          - /url: https://embedpress.wpqa.site/
      - listitem:
        - link "Random Gutenberg":
          - /url: https://embedpress.wpqa.site/random-gutenberg/
      - listitem:
        - link "Random Elementor":
          - /url: https://embedpress.wpqa.site/random-elementor/
      - listitem:
        - link "Random Classic":
          - /url: https://embedpress.wpqa.site/random-classic/
      - listitem:
        - link "Automation Report":
          - /url: https://nahidthenh.github.io/embedpress-playwright-automation/
      - listitem:
        - link "Md. Nahid Hasan (Admin)":
          - /url: https://embedpress.wpqa.site/wp-admin
  - paragraph
  - search "Search form":
    - searchbox "Search input"
    - textbox "Search autocomplete" [disabled]
  - button "Search magnifier":
    - img
  - paragraph
- heading "Gutenberg Spreaker" [level=1]
- main:
  - article:
    - heading "Spreaker Playlist" [level=2]
    - heading "Enable Pro Features" [level=2]
    - paragraph: Disable Downloads – Upload Cover Image – Loop Playlist – Continuous Playlist
    - heading "Disable Pro Features" [level=2]
    - paragraph: Disable Downloads – Upload Cover Image – Loop Playlist – Continuous Playlist
    - heading "Dark Theme & Red Color" [level=2]
    - paragraph: Hide Likes, Comments, Sharing, Logo & Download
    - heading "Spreaker Single Episode" [level=2]
- contentinfo:
  - paragraph: © 2025 EmbedPress Automation Testing WPDeveloper SQA Team
```

# Test source

```ts
   91 |             { locator: frame.getByLabel('Read comments'), description: 'Comments button' },
   92 |             { locator: frame.getByLabel('Share episode on social media'), description: 'Share button' },
   93 |             { locator: frame.locator('.button_info').first(), description: 'Information button' },
   94 |             { locator: frame.getByLabel('Listen on Spreaker'), description: 'Listen on Spreaker button' },
   95 |             // {locator:frame.}
   96 |         ];
   97 |
   98 |
   99 |         // Check visibility of all required elements within the iframe
  100 |         for (const { locator, description } of elementsToCheck) {
  101 |             await expect(locator).toBeVisible({ message: `${description} should be visible` });
  102 |         }
  103 |
  104 |         // Assert the "Download button" is NOT visible
  105 |         const downloadButton = frame.getByLabel('player.download_episode');
  106 |         await expect(downloadButton).toBeHidden({ message: 'Download button should not be visible' });
  107 |
  108 |         // Interact with the episode play and pause buttons
  109 |         await frame.getByLabel('Play episode 286. A').click();
  110 |         await expect(
  111 |             frame.getByRole('link', { name: '286. A Thanksgiving Massacre' })
  112 |         ).toBeVisible({ message: 'Link to episode 286 should be visible' });
  113 |         await frame.getByLabel('Pause episode 286. A').first().click();
  114 |     });
  115 |
  116 |     // Disable Pro Features 
  117 |     test('Disable Pro Features', async ({ page }) => {
  118 |         // Check the main heading visibility
  119 |         const heading = page.getByRole('heading', { name: 'Disable Pro Features' });
  120 |         await heading.scrollIntoViewIfNeeded();
  121 |         await expect(heading).toBeVisible();
  122 |
  123 |         // Define a common locator for the embedded iframe
  124 |         const iframeLocator = page.locator('iframe[title="This is title"]').nth(2)
  125 |
  126 |         // Access the iframe's content frame
  127 |         const frame = await iframeLocator.contentFrame();
  128 |         if (!frame) {
  129 |             throw new Error('Failed to locate the iframe content frame.');
  130 |         }
  131 |
  132 |
  133 |         // Check visibility of player actions inside the iframe
  134 |         const playerActions = frame.locator('.player_actions');
  135 |         await expect(playerActions).toBeVisible({ message: 'Player actions should be visible' });
  136 |
  137 |         // Check the visibility of the "Download Episode" label
  138 |         const downloadButton = frame.getByLabel('player.download_episode');
  139 |         await expect(downloadButton).toBeVisible({ message: 'Download button should be visible' });
  140 |
  141 |         // Check the visibility of the "Information" button
  142 |         const infoButton = frame.locator('.button_info').first();
  143 |         await expect(infoButton).toBeVisible({ message: 'Information button should be visible' });
  144 |     });
  145 |
  146 |     // Dark Theme & Red Color Hide likes COmments Sharing logo & Download
  147 |     test('Dark Theme & Red Color', async ({ page }) => {
  148 |         // Check the main heading visibility
  149 |         const heading = page.getByRole('heading', { name: 'Dark Theme & Red Color' });
  150 |         await heading.scrollIntoViewIfNeeded();
  151 |         await expect(heading).toBeVisible();
  152 |
  153 |         // Define a common locator for the iframe
  154 |         const iframeLocator = page.locator('iframe[title="This is title"]').nth(3);
  155 |
  156 |         // Access the iframe's content frame
  157 |         const frame = await iframeLocator.contentFrame();
  158 |         if (!frame) {
  159 |             throw new Error('Failed to locate the iframe content frame.');
  160 |         }
  161 |
  162 |         // Define locators within the iframe
  163 |         const downloadButton = frame.getByLabel('player.download_episode');
  164 |         const likeButton = frame.getByLabel('Like episode');
  165 |         const commentsButton = frame.getByLabel('Read comments');
  166 |         const shareButton = frame.getByLabel('Share episode on social media');
  167 |         const logoButton = frame.getByLabel('Listen on Spreaker');
  168 |
  169 |         // Assert that these elements are NOT visible
  170 |         await expect(downloadButton).toBeHidden({ message: 'Download button should not be visible' });
  171 |         await expect(likeButton).toBeHidden({ message: 'Like button should not be visible' });
  172 |         await expect(commentsButton).toBeHidden({ message: 'Comments button should not be visible' });
  173 |         await expect(shareButton).toBeHidden({ message: 'Share button should not be visible' });
  174 |         await expect(logoButton).toBeHidden({ message: 'Logo button should not be visible' });
  175 |
  176 |         // Assert CSS property of an element within the frame
  177 |         const cssElement = frame.locator('.widget.theme_dark.theme_with_playlist');
  178 |
  179 |         // Assert that the element has the expected class
  180 |         await expect(cssElement).toHaveClass(/widget theme_dark theme_with_playlist/);
  181 |     });
  182 |
  183 |
  184 |     // Spreaker Single Episode
  185 |     test('Spreaker Single Episode', async ({ page }) => {
  186 |         // Check the main heading visibility
  187 |         const heading = page.getByRole('heading', { name: 'Spreaker Single Episode' });
  188 |         await heading.scrollIntoViewIfNeeded();
  189 |         await expect(heading).toBeVisible();
  190 |         const iframeLocator = page.locator('iframe[title="This is title"]').nth(4);
> 191 |         await expect(iframeLocator).toBeVisible()
      |                                     ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  192 |     });
  193 | });
```