# Test info

- Name: Content Protection Pro Feature - Classic Editor >> Should protect content in classic editor
- Location: /home/runner/work/embedpress-playwright-automation/embedpress-playwright-automation/tests/classic/content-protection.spec.js:15:5

# Error details

```
Error: page.goto: net::ERR_ABORTED; maybe frame was detached?
Call log:
  - navigating to "https://embedpress.wpqa.site/playwright-classic-editor/classic-content-protection/", waiting until "load"

    at /home/runner/work/embedpress-playwright-automation/embedpress-playwright-automation/tests/classic/content-protection.spec.js:11:20
```

# Test source

```ts
   1 | const { test, expect } = require('@playwright/test');
   2 |
   3 | let slug = 'playwright-classic-editor/classic-content-protection/';
   4 |
   5 | // User Login 
   6 | const subscriberUser = process.env.SUBSCRIBER_USER;
   7 | const subscriberPass = process.env.SUBSCRIBER_PASS;
   8 |
   9 | test.describe('Content Protection Pro Feature - Classic Editor', () => {
  10 |     test.beforeEach(async ({ page }) => {
> 11 |         await page.goto(slug);
     |                    ^ Error: page.goto: net::ERR_ABORTED; maybe frame was detached?
  12 |         await expect(page.getByRole('heading', { name: 'Classic Content Protection' })).toBeVisible();
  13 |     });
  14 |
  15 |     test('Should protect content in classic editor', async ({ page }) => {
  16 |         await expect(page.getByRole('heading', { name: 'Content Protection Type : User Role – Subscriber', exact: true })).toBeVisible();
  17 |         await expect(page.getByText('Only editor will see the')).toBeVisible();
  18 |         await expect(page.getByRole('heading', { name: 'Content Protection Type : Password – Password is' })).toBeVisible();
  19 |         await expect(page.locator('iframe[title="আপনাকে কেন ভালবাসি\\, ইয়া রাসুলাল্লাহ \\(সঃ\\)\\? \\[Baseera\\]"]').contentFrame().locator('.ytp-cued-thumbnail-overlay-image')).toBeHidden();
  20 |         await expect(page.getByText('Content Locked Content is')).toBeVisible();
  21 |         await expect(page.getByRole('heading', { name: 'Content Protection Type : User Role – Subscriber : PDF Support' })).toBeVisible();
  22 |         await expect(page.getByText('This content is protected.')).toBeVisible();
  23 |         await expect(page.locator('iframe[title="sample_pdf"]').contentFrame().locator('#viewer')).toBeHidden();
  24 |     });
  25 |
  26 |     test('Content Protection Type : Password Should Visibile', async ({ page }) => {
  27 |         await expect(page.getByRole('heading', { name: 'Content Protection Type : Password – Password is' })).toBeVisible();
  28 |         await expect(page.getByText('Content Locked Content is')).toBeVisible();
  29 |         await expect(page.locator('iframe[title="আপনাকে কেন ভালবাসি\\, ইয়া রাসুলাল্লাহ \\(সঃ\\)\\? \\[Baseera\\]"]').contentFrame().locator('.ytp-cued-thumbnail-overlay-image')).toBeHidden();
  30 |         await page.getByPlaceholder('Password').click();
  31 |         await page.getByPlaceholder('Password').fill('96796');
  32 |         await page.getByRole('button', { name: 'Unlock' }).click();
  33 |         await expect(page.locator('iframe[title="আপনাকে কেন ভালবাসি\\, ইয়া রাসুলাল্লাহ \\(সঃ\\)\\? \\[Baseera\\]"]').contentFrame().locator('.ytp-cued-thumbnail-overlay-image')).toBeVisible();
  34 |     });
  35 |
  36 |     test('Content Protection Type : User Role Should Visibile', async ({ page }) => {
  37 |         if (!subscriberUser || !subscriberPass) {
  38 |             throw new Error('Environment variables SUBSCRIBER_USER and SUBSCRIBER_PASS are not set.');
  39 |         }
  40 |         await page.goto('https://embedpress.wpqa.site/wp-admin');
  41 |         await page.getByLabel('Username or Email Address').click();
  42 |         await page.getByLabel('Username or Email Address').fill(subscriberUser);
  43 |         await page.getByLabel('Password', { exact: true }).click();
  44 |         await page.getByLabel('Password', { exact: true }).fill(subscriberPass);
  45 |         await page.getByRole('button', { name: 'Log In' }).click();
  46 |         await expect(page.getByRole('heading', { name: 'Profile' })).toBeVisible();
  47 |         await page.goto(slug);
  48 |         await expect(page.getByText('Only editor will see the')).toBeHidden();
  49 |         await expect(page.getByText('This content is protected.')).toBeHidden();
  50 |         await expect(page.locator('iframe[title="আপনাকে কেন ভালবাসি\\, ইয়া রাসুলাল্লাহ \\(সঃ\\)\\? \\[Baseera\\]"]').contentFrame().locator('.ytp-cued-thumbnail-overlay-image')).toBeVisible();
  51 |         await expect(page.locator('iframe[title="sample_pdf"]').contentFrame().locator('#viewer')).toBeVisible();
  52 |     });
  53 | });
  54 |
  55 |
```